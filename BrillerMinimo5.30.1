(function() {
    'use strict';

    // æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚¿ãƒƒãƒ•ã®ãƒªã‚¹ãƒˆ
    var targetStaff = [
        'ãƒ¢ãƒ¼ãƒ‰ã‚±ã‚¤ã‚º ã‚¢ãƒ¤ãƒŠ',
        'ãƒ¢ãƒ¼ãƒ‰ã‚±ã‚¤ã‚º ASUKA',
        'ä¸‹é‡ èŒœ',
        'Mode K\'sğŸ«§ hiyona',
        'ãƒ¢ãƒ¼ãƒ‰ã‚±ã‚¤ã‚ºãƒ–ãƒªã‚¨ å°æ¾âœ‚ï¸ç›´æ¨¹',
        'æ¾æœ¬ æ½”æ¨¹',
        'ãƒ¢ãƒ¼ãƒ‰ã‚±ã‚¤ã‚º âœ‚ï¸TOMOKIâœ‚ï¸',
        'å®®å¾Œ å¯§ã€…',
        'ğŸŒŸè¥¿å°¾ ç¾ç´€ğŸŒŸ',
        'âœ¨sylphâœ¨ MADOKAâœ¨'
    ];

       // ã‚¹ã‚¿ãƒƒãƒ•ã®å…¬é–‹/éå…¬é–‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
    function toggleStaffVisibility() {
        // å…¨ã¦ã®é¸æŠè¦ç´ ã‚’å–å¾—
        var selectElements = document.querySelectorAll('.m_staff_card_action .a_select');

        // éå…¬é–‹ã«å¤‰æ›´
        selectElements.forEach(function(selectElement) {
            var cardTitle = selectElement.closest('.m_staff_card_action').previousElementSibling.querySelector('.m_staff_card_title');
            if (cardTitle && targetStaff.includes(cardTitle.textContent.trim())) {
                selectElement.value = '1'; // 1ã¯ã€Œéå…¬é–‹ã€
                var event = new Event('change', { bubbles: true });
                selectElement.dispatchEvent(event);
            }
        });

        // 5ç§’å¾…æ©Ÿã—ã¦ã‹ã‚‰å…¬é–‹ã«å¤‰æ›´
        setTimeout(function() {
            selectElements.forEach(function(selectElement) {
                var cardTitle = selectElement.closest('.m_staff_card_action').previousElementSibling.querySelector('.m_staff_card_title');
                if (cardTitle && targetStaff.includes(cardTitle.textContent.trim())) {
                    selectElement.value = '0'; // 0ã¯ã€Œå…¬é–‹ã€
                    var event = new Event('change', { bubbles: true });
                    selectElement.dispatchEvent(event);
                }
            });

            // å…¬é–‹å‡¦ç†ãŒçµ‚ã‚ã£ãŸå¾Œã€ã•ã‚‰ã«5ç§’å¾…æ©Ÿã—ã¦ã‹ã‚‰ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
            setTimeout(function() {
                location.reload();
            }, 5000);
        }, 5000);
    }

    // æ¬¡ã®å®Ÿè¡Œæ™‚é–“ã‚’è¨­å®š (30åˆ†å¾Œ)
    function setNextExecutionTime() {
        return new Date().getTime() + (30) * 60 * 1000;
    }

    var nextExecution = setNextExecutionTime();
    var executed = false; // å®Ÿè¡Œãƒ•ãƒ©ã‚°

    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ã®æ›´æ–°
    function updateCountdown() {
        var now = new Date().getTime();
        var timeLeft = nextExecution - now;

        if (timeLeft <= 0 && !executed) {
            executed = true; // å®Ÿè¡Œãƒ•ãƒ©ã‚°ã‚’ã‚»ãƒƒãƒˆ
            toggleStaffVisibility();
            // ãƒšãƒ¼ã‚¸ãŒãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŸã‚ã€æ¬¡ã®å®Ÿè¡Œæ™‚é–“ã®å†è¨­å®šã¯ä¸è¦
            return;
        }

        var minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        countdownElement.textContent = `æ¬¡ã®å®Ÿè¡Œã¾ã§: ${minutes}åˆ† ${seconds}ç§’`;
    }

    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¡¨ç¤ºã®ä½œæˆ
    var countdownElement = document.createElement('div');
    countdownElement.style.position = 'fixed';
    countdownElement.style.bottom = '10px';
    countdownElement.style.right = '10px';
    countdownElement.style.zIndex = '1000';
    countdownElement.style.padding = '10px';
    countdownElement.style.backgroundColor = '#333';
    countdownElement.style.color = 'white';
    countdownElement.style.border = 'none';
    countdownElement.style.borderRadius = '5px';

    document.body.appendChild(countdownElement);

    // åˆå›ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã®è¡¨ç¤º
    updateCountdown();

    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ã®æ›´æ–°ã‚’æ¯ç§’è¡Œã†
    setInterval(updateCountdown, 1000);
})();
